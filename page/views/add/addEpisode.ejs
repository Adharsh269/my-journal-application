<%- include('../partials/header.ejs') %>
    <div class="container pt-5">
        <div class="heading">
            <h1>Today Life...</h1>
        </div>
        <div class="write-episode   ">
            <form action="/addepisode" method="post">
                <div class="mood d-flex bg-dark p-2 gap-2 rounded mb-3">
                    <h2 class="text-light">Mood:</h2>
                    <input type="text" name="mood" id="mood" required placeholder="What is your Mood rigtht now." class="form-control" required>
                </div>
                <div class="form-group mb-3" id="wentwell">
                    <label for="wentwell" class="bg-dark text-light rounded form-control" style="height: 50px; font-size: 30px;">Wentwell</label>
                    <div class="d-flex gap-1">
                        <input type="text" name="wentwell" class="form-control" required>
                        <button type="button" class="btn btn-lg btn-danger" disabled>Remove</button>
                        <button type="button" onclick="addInput('wentwell')" class="btn btn-primary btn-lg">Add</button>
                    </div>
                </div>
                <div class="form-group mb-3" id="wentwrong">
                    <label for="wentwrong" class="bg-dark text-light rounded form-control" style="height: 50px; font-size: 30px;">Wentwrong</label>
                    <div class="d-flex">
                        <input type="text" name="wentwrong" class="form-control" required>
                        <button type="button" class="btn btn-lg btn-danger" disabled>Remove</button>
                        <button type="button" class="btn btn-primary btn-lg" onclick="addInput('wentwrong')">Add</button>
                    </div>
                </div>
                <div class="form-group mb-3" id="learning">
                    <label for="learning" class="bg-dark text-light rounded form-control" style="height: 50px; font-size: 30px;">Learning</label>
                    <div class="d-flex">
                        <input type="text" name="learning" class="form-control" required>
                        <button type="button" class="btn btn-lg btn-danger" disabled>Remove</button>
                        <button type="button" class="btn btn-primary btn-lg" onclick="addInput('learning')">Add</button>
                    </div>
                </div>
                <div class="d-flex mt-2" >
                    <div class="rating d-inline">
                        <input type="checkbox" name="star" id="r-1" value="false" >
                        <label for="r-1"></label>
                    </div>
                    <button class="btn btn-lg btn-primary" onclick="onRated(this)" type="submit">Add Episode</button>
                </div>
            </form>
        </div>
    </div>
    <script>
        function onRated() {
            // event.preventDefault();
            let checkbox = document.getElementById("r-1");
            console.log(checkbox);
            if(checkbox.checked) {
                checkbox.value = "true";
            }
        }
        
        function addInput(inputType) {
            let newDiv = document.createElement("div");
            newDiv.classList.add("d-flex", "gap-1");

            let newInput = document.createElement("input");
            newInput.classList.add("form-control");
            newInput.name = inputType;
            newInput.type = "text";

            let newButton = document.createElement("button");
            newButton.classList.add("btn", "btn-lg", "btn-primary");
            newButton.type = "button";
            newButton.innerText = "Add";
            newButton.onclick = () => addInput(inputType);

            let newRemoveBtn = document.createElement("button");
            newRemoveBtn.classList.add("btn", "btn-lg", "btn-danger");
            newRemoveBtn.innerText = "Remove";
            newRemoveBtn.type = "button";
            newRemoveBtn.onclick = (event) => {
                let parentDiv = event.target.parentElement;
                parentDiv.remove();
            }    

            newDiv.appendChild(newInput);
            newDiv.appendChild(newRemoveBtn)
            newDiv.appendChild(newButton);
            
            document.getElementById(inputType).appendChild(newDiv);
        }
    </script>
<%- include('../partials/footer.ejs') %>